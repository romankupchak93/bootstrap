{"version":3,"file":"init.js","sources":["../../src/autoinit/init.js"],"sourcesContent":["import SelectorEngine from '../dom/selector-engine.js';\r\nimport { defineJQueryPlugin } from '../util/index.js';\r\n\r\nconst mapComponentsData = (() => {\r\n  const componentsData = [];\r\n  return {\r\n    set(componentName) {\r\n      componentsData.push(componentName);\r\n    },\r\n    get(componentName) {\r\n      return componentsData.includes(componentName);\r\n    },\r\n  };\r\n})();\r\n\r\nexport const InitializedComponents = {\r\n  set(componentName) {\r\n    mapComponentsData.set(componentName);\r\n  },\r\n  get(componentName) {\r\n    return mapComponentsData.get(componentName);\r\n  },\r\n};\r\n\r\nconst isInitialized = (componentName) => {\r\n  return InitializedComponents.get(componentName);\r\n};\r\n\r\nexport const bindCallbackEventsIfNeeded = (component) => {\r\n  if (!isInitialized(component.NAME)) {\r\n    const manualInit = true;\r\n    initComponent(component, manualInit);\r\n  }\r\n};\r\n\r\nconst initComponent = (component, manualInit = false) => {\r\n  if (!component || InitializedComponents.get(component.NAME)) {\r\n    return;\r\n  }\r\n\r\n  InitializedComponents.set(component.NAME);\r\n\r\n  const thisComponent = _defaultInitSelectors[component.NAME] || null;\r\n  const isToggler = thisComponent?.isToggler || false;\r\n\r\n  defineJQueryPlugin(component);\r\n  if (thisComponent?.advanced) {\r\n    thisComponent.advanced(component, thisComponent?.selector);\r\n    return;\r\n  }\r\n\r\n  if (isToggler) {\r\n    thisComponent.callback(component, thisComponent?.selector);\r\n\r\n    return;\r\n  }\r\n\r\n  if (manualInit) {\r\n    return;\r\n  }\r\n\r\n  SelectorEngine.find(thisComponent?.selector).forEach((element) => {\r\n    let instance = component.getInstance(element);\r\n    if (!instance) {\r\n      instance = new component(element); // eslint-disable-line\r\n      if (thisComponent?.onInit) {\r\n        instance[thisComponent.onInit]();\r\n      }\r\n    }\r\n  });\r\n};\r\n\r\nlet _defaultInitSelectors;\r\nexport class InitBS {\r\n  constructor(defaultInitSelectors) {\r\n    _defaultInitSelectors = defaultInitSelectors;\r\n  }\r\n\r\n  init = (components) => {\r\n    components.forEach((component) => initComponent(component));\r\n  };\r\n\r\n  initBS = (components, checkOtherImports = false) => {\r\n    const componentList = Object.keys(_defaultInitSelectors).map((element) => {\r\n      const requireAutoInit = Boolean(\r\n        document.querySelector(_defaultInitSelectors[element].selector)\r\n      );\r\n\r\n      if (requireAutoInit) {\r\n        const component = components[_defaultInitSelectors[element].name];\r\n        if (!component && !InitializedComponents.get(element) && checkOtherImports) {\r\n          // eslint-disable-next-line no-console\r\n          console.warn(\r\n            `Please import ${_defaultInitSelectors[element].name} from \"BS\" package and add it to a object parameter inside \"initBS\" function`\r\n          );\r\n        }\r\n        return component;\r\n      }\r\n\r\n      return null;\r\n    });\r\n\r\n    this.init(componentList);\r\n  };\r\n}\r\n"],"names":["mapComponentsData","componentsData","set","componentName","push","get","includes","InitializedComponents","isInitialized","bindCallbackEventsIfNeeded","component","NAME","manualInit","initComponent","thisComponent","_defaultInitSelectors","isToggler","defineJQueryPlugin","advanced","selector","callback","SelectorEngine","find","forEach","element","instance","getInstance","onInit","InitBS","constructor","defaultInitSelectors","init","components","initBS","checkOtherImports","componentList","Object","keys","map","requireAutoInit","Boolean","document","querySelector","name","console","warn"],"mappings":"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"}