{"version":3,"file":"md-scrollbar.js","sources":["../../src/util/md-scrollbar.js"],"sourcesContent":["/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.0.0): util/scrollBar.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport MdSelectorEngine from '../dom/selector-engine';\nimport Manipulator from '../dom/manipulator';\n\nconst SELECTOR_FIXED_CONTENT = '.fixed-top, .fixed-bottom, .is-fixed, .sticky-top';\nconst SELECTOR_STICKY_CONTENT = '.sticky-top';\n\nconst getWidth = () => {\n  // https://developer.mozilla.org/en-US/docs/Web/API/Window/innerWidth#usage_notes\n  const documentWidth = document.documentElement.clientWidth;\n  return Math.abs(window.innerWidth - documentWidth);\n};\n\nconst hide = (width = getWidth()) => {\n  _disableOverFlow();\n  // give padding to element to balances the hidden scrollbar width\n  _setElementAttributes('body', 'paddingRight', (calculatedValue) => calculatedValue + width);\n  // trick: We adjust positive paddingRight and negative marginRight to sticky-top elements, to keep shown fullwidth\n  _setElementAttributes(\n    SELECTOR_FIXED_CONTENT,\n    'paddingRight',\n    (calculatedValue) => calculatedValue + width\n  );\n  _setElementAttributes(\n    SELECTOR_STICKY_CONTENT,\n    'marginRight',\n    (calculatedValue) => calculatedValue - width\n  );\n};\n\nconst _disableOverFlow = () => {\n  const actualValue = document.body.style.overflow;\n  if (actualValue) {\n    Manipulator.setDataAttribute(document.body, 'overflow', actualValue);\n  }\n\n  document.body.style.overflow = 'hidden';\n};\n\nconst _setElementAttributes = (selector, styleProp, callback) => {\n  const scrollbarWidth = getWidth();\n  MdSelectorEngine.find(selector).forEach((element) => {\n    if (element !== document.body && window.innerWidth > element.clientWidth + scrollbarWidth) {\n      return;\n    }\n\n    const actualValue = element.style[styleProp];\n    const calculatedValue = window.getComputedStyle(element)[styleProp];\n    Manipulator.setDataAttribute(element, styleProp, actualValue);\n    element.style[styleProp] = `${callback(Number.parseFloat(calculatedValue))}px`;\n  });\n};\n\nconst reset = () => {\n  _resetElementAttributes('body', 'overflow');\n  _resetElementAttributes('body', 'paddingRight');\n  _resetElementAttributes(SELECTOR_FIXED_CONTENT, 'paddingRight');\n  _resetElementAttributes(SELECTOR_STICKY_CONTENT, 'marginRight');\n};\n\nconst _resetElementAttributes = (selector, styleProp) => {\n  MdSelectorEngine.find(selector).forEach((element) => {\n    const value = Manipulator.getDataAttribute(element, styleProp);\n    if (typeof value === 'undefined') {\n      element.style.removeProperty(styleProp);\n    } else {\n      Manipulator.removeDataAttribute(element, styleProp);\n      element.style[styleProp] = value;\n    }\n  });\n};\n\nconst isBodyOverflowing = () => {\n  return getWidth() > 0;\n};\n\nexport { getWidth, hide, isBodyOverflowing, reset };\n"],"names":["SELECTOR_FIXED_CONTENT","SELECTOR_STICKY_CONTENT","getWidth","documentWidth","document","documentElement","clientWidth","Math","abs","window","innerWidth","hide","width","_disableOverFlow","_setElementAttributes","calculatedValue","actualValue","body","style","overflow","Manipulator","setDataAttribute","selector","styleProp","callback","scrollbarWidth","MdSelectorEngine","find","forEach","element","getComputedStyle","Number","parseFloat","reset","_resetElementAttributes","value","getDataAttribute","removeProperty","removeDataAttribute","isBodyOverflowing"],"mappings":"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"}