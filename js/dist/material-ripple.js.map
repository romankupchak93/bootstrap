{"version":3,"file":"material-ripple.js","sources":["../src/material-ripple.js"],"sourcesContent":["/**\n * --------------------------------------------------------------------------\n * Bootstrap material ripple.js\n * --------------------------------------------------------------------------\n */\nimport { MDCRipple } from '@material/ripple'\nimport { defineJQueryPlugin } from './util/index.js'\nimport EventHandler from './dom/event-handler.js'\nimport SelectorEngine from './dom/selector-engine.js'\nimport BaseComponent from './base-component.js'\n\nconst NAME = 'ripple'\nconst DATA_KEY = 'bs.ripple'\nconst EVENT_KEY = `.${DATA_KEY}`\nconst DATA_API_KEY = '.data-api'\nconst CLASS_NAME_RIPPLE = 'ripple-surface'\n\nconst SELECTOR_COMPONENT = '.btn, .accordion-button, a.list-group-item, a.dropdown-item'\nconst SELECTOR_COMPONENT_UNBOUNDED = '.btn-close, .btn-icon, .navbar-toggler'\nconst SELECTOR_DATA_TIP = '.btn:not([data-bs-toggle=\"tooltip\"])'\nconst SELECTOR_DATA_TOGGLE = '[data-bs-toggle=\"dropdown\"]'\nconst SELECTOR_COMPONENTS = `${SELECTOR_COMPONENT}, ${SELECTOR_DATA_TIP}, ${SELECTOR_DATA_TOGGLE}, ${SELECTOR_COMPONENT_UNBOUNDED}`\n\nconst EVENT_LOAD_DATA_API = `load${EVENT_KEY}${DATA_API_KEY}`\n\n/**\n * Class definition\n */\nclass MaterialRipple extends BaseComponent {\n  constructor(element) {\n    super(element)\n    this._element = element\n    this._ripple = null\n    this._init()\n  }\n\n  // Getters\n  static get NAME() {\n    return NAME\n  }\n\n  _init() {\n    if (!this._element || this._element.tagName.toLowerCase() === 'input') {\n      return\n    }\n\n    this._activate(this._element)\n  }\n\n  dispose() {\n    if (this._ripple) {\n      this._ripple.destroy()\n      this._ripple = null\n    }\n\n    super.dispose()\n  }\n\n  _checkInstance(element) {\n    const instance = MaterialRipple.getInstance(element)\n    if (instance) {\n      instance.dispose()\n    }\n  }\n\n  _activate(element) {\n    this._checkInstance(element)\n    const rippleContainer = document.createElement('div')\n    rippleContainer.classList.add(CLASS_NAME_RIPPLE)\n    element.appendChild(rippleContainer)\n    this._setRipple(element, rippleContainer)\n  }\n\n  _setRipple(element, rippleContainer) {\n    this._ripple = new MDCRipple(rippleContainer)\n    this._isUnbounded(element)\n  }\n\n  _isUnbounded(element) {\n    const isUnbound = element.matches(SELECTOR_COMPONENT_UNBOUNDED)\n    if (isUnbound) {\n      this._ripple.unbounded = true\n    }\n  }\n\n  // Static\n  static jQueryInterface(config) {\n    return this.each(function () {\n      const data = MaterialRipple.getOrCreateInstance(this)\n\n      if (typeof config !== 'string') {\n        return\n      }\n\n      if (data[config] === undefined || config.startsWith('_') || config === 'constructor') {\n        throw new TypeError(`No method named \"${config}\"`)\n      }\n\n      data[config]()\n    })\n  }\n}\n\n/**\n * Data API implementation\n */\nEventHandler.on(window, EVENT_LOAD_DATA_API, () => {\n  const rippleSurfaces = SelectorEngine.find(SELECTOR_COMPONENTS)\n  for (const surface of rippleSurfaces) {\n    MaterialRipple.getOrCreateInstance(surface)\n  }\n})\n/**\n * jQuery\n */\ndefineJQueryPlugin(MaterialRipple)\nexport default MaterialRipple\n\n// import {MDCRipple} from '@material/ripple';\n// import {MDCRippleFoundation} from '@material/ripple/foundation';\n// import {onDOMContentLoaded} from './util/index';\n//\n// class MaterialRipple extends MDCRipple {\n//   constructor(element) {\n//     super(element, new MDCRippleFoundation({adapter: {}}));\n//   }\n// }\n//\n// onDOMContentLoaded(() => {\n//   const classText = ['btn']\n//   const btnIconClassList = ['btn-close', 'btn-icon', 'btn-edit', 'btn-clipboard', 'navbar-toggler']\n//   const dropClassList = ['dropdown-toggle']\n//\n//   const dropSelectors = dropClassList.map(dropClass => {\n//     return `:not(.${dropClass}), :not(.${dropClass}), :not(div[class*=\"${classText}-\"])`\n//   })\n//\n//   const primarySelector = document.querySelectorAll(`[class*=\"${classText}\"]${dropSelectors.join('')}`)\n//   const dropClassListElements = document.querySelectorAll(`.${dropClassList.join('.')}`)\n//\n//   for (const elementSelector of primarySelector) {\n//     if ((elementSelector.classList.contains(classText) || btnIconClassList.some(cls => elementSelector.classList.contains(cls))) && !dropClassList.some(cls => elementSelector.classList.contains(cls))) {\n//       elementSelector.classList.add('mdc-ripple-surface')\n//       MDCRipple.attachTo(elementSelector);\n//     }\n//   }\n//   for (const dropElement of dropClassListElements) {\n//     if (dropElement.classList.contains(classText) && dropClassList.some(cls => dropElement.classList.contains(cls))) {\n//       const childElementDrop = document.createElement('div')\n//       childElementDrop.classList.add('mdc-ripple-surface')\n//       dropElement.append(childElementDrop)\n//     }\n//   }\n//   for (const btnWithIconMDC of btnIconClassList) {\n//     const elBtnIconMDC = document.querySelectorAll(`.${btnWithIconMDC}`)\n//     for (const btnIconMDC of elBtnIconMDC) {\n//       btnIconMDC.style.borderRadius = '50%'\n//       MDCRipple.attachTo(btnIconMDC);\n//       btnIconMDC.classList.add('mdc-ripple-surface')\n//     }\n//   }\n// })\n// export default MaterialRipple\n//\n// // const toggleBtns = document.querySelectorAll('.dropdown-toggle');\n// // const iconBtns = document.querySelectorAll('.btn-icon, .btn-close, .btn-edit');\n// // const iconBtnClasses = Array.from(iconBtns).map(btn => btn.classList);\n// // const iconBtnSelectors = iconBtnClasses.map(clsList => `[class*=\"${clsList}\"]`).join(',');\n// // const defButtons = document.querySelectorAll(`[class*=\"btn\"]:not(${iconBtnSelectors}):not(.dropdown-toggle)`);\n// // const defButtonClasses = Array.from(defButtons).map(btn => btn.classList);\n// //\n// // for (const button of defButtons) {\n// //   const classList = Array.from(button.classList);\n// //   if (classList.some(cls => defButtonClasses.some(clsList => clsList.contains(cls))) && !Array.from(toggleBtns).some(cls => button.classList.contains(cls))) {\n// //     button.classList.add('mdc-ripple-surface');\n// //     MDCRipple.attachTo(button);\n// //   }\n// // }\n// //\n// // for (const dropdownBtn of toggleBtns) {\n// //   const mdcEl = document.createElement('span')\n// //   mdcEl.classList.add('mdc-ripple-surface')\n// //   dropdownBtn.append(mdcEl)\n// //   MDCRipple.attachTo(dropdownBtn);\n// // }\n// //\n// // for (const iconBtn of iconBtns) {\n// //   const mdcEl = document.createElement('span')\n// //   mdcEl.classList.add('mdc-ripple-surface')\n// //   iconBtn.append(mdcEl)\n// //   MDCRipple.attachTo(iconBtn);\n// // }\n"],"names":["NAME","DATA_KEY","EVENT_KEY","DATA_API_KEY","CLASS_NAME_RIPPLE","SELECTOR_COMPONENT","SELECTOR_COMPONENT_UNBOUNDED","SELECTOR_DATA_TIP","SELECTOR_DATA_TOGGLE","SELECTOR_COMPONENTS","EVENT_LOAD_DATA_API","MaterialRipple","BaseComponent","constructor","element","_element","_ripple","_init","tagName","toLowerCase","_activate","dispose","destroy","_checkInstance","instance","getInstance","rippleContainer","document","createElement","classList","add","appendChild","_setRipple","MDCRipple","_isUnbounded","isUnbound","matches","unbounded","jQueryInterface","config","each","data","getOrCreateInstance","undefined","startsWith","TypeError","EventHandler","on","window","rippleSurfaces","SelectorEngine","find","surface","defineJQueryPlugin"],"mappings":"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M,CAAC,KAAKI,SAAS,IAAIJ,MAAM,CAACK,UAAU,CAAC,GAAG,CAAC,IAAIL,MAAM,KAAK,aAAa,EAAE;EACpF,QAAA,MAAM,IAAIM,SAAS,CAAE,CAAmBN,iBAAAA,EAAAA,MAAO,GAAE,CAAC,CAAA;EACpD,OAAA;EAEAE,MAAAA,IAAI,CAACF,MAAM,CAAC,EAAE,CAAA;EAChB,KAAC,CAAC,CAAA;EACJ,GAAA;EACF,CAAA;;EAEA;EACA;EACA;EACAO,YAAY,CAACC,EAAE,CAACC,MAAM,EAAEtC,mBAAmB,EAAE,MAAM;EACjD,EAAA,MAAMuC,cAAc,GAAGC,cAAc,CAACC,IAAI,CAAC1C,mBAAmB,CAAC,CAAA;EAC/D,EAAA,KAAK,MAAM2C,OAAO,IAAIH,cAAc,EAAE;EACpCtC,IAAAA,cAAc,CAAC+B,mBAAmB,CAACU,OAAO,CAAC,CAAA;EAC7C,GAAA;EACF,CAAC,CAAC,CAAA;EACF;EACA;EACA;AACAC,6BAAkB,CAAC1C,cAAc,CAAC,CAAA;;EAGlC;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;;;;;;;"}