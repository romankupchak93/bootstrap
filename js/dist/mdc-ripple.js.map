{"version":3,"file":"mdc-ripple.js","sources":["../src/mdc-ripple.js"],"sourcesContent":["import { MDCRipple, MDCRippleFoundation } from '@material/ripple'\nimport { getjQuery, onDOMContentLoaded } from './util/index.js'\n\nconst NAME = 'mdc.ripple'\n\nclass MDCRippled {\n  constructor(element) {\n    this.root = element\n    this.active = false\n    this.root.addEventListener('keydown', evt => {\n      if (isSpace(evt)) {\n        this.active = true\n      }\n    })\n    this.root.addEventListener('keyup', evt => {\n      if (isSpace(evt)) {\n        this.active = false\n      }\n    })\n    this.root.addEventListener('mouseenter', evt => {\n      if (isSpace(evt)) {\n        this.active = false\n      }\n    })\n    this.root.addEventListener('mouseleave', evt => {\n      if (isSpace(evt)) {\n        this.active = false\n      }\n    })\n    const foundation = new MDCRippleFoundation({\n      ...MDCRipple.createAdapter(this), isSurfaceActive: () => this.active\n    })\n    this.ripple = new MDCRipple(this.root, foundation)\n  }\n\n  static get NAME() {\n    return NAME\n  }\n}\n\nfunction isSpace(evt) {\n  return evt.key === ' ' || evt.keyCode === 32\n}\n\nonDOMContentLoaded(() => {\n  const $ = getjQuery()\n\n  if ($) {\n    const JQUERY_NO_CONFLICT = $.fn[NAME]\n    $.fn[NAME] = MDCRippled.jQueryInterface\n    $.fn[NAME].Constructor = MDCRippled\n    $.fn[NAME].noConflict = () => {\n      $.fn[NAME] = JQUERY_NO_CONFLICT\n      return MDCRippled.jQueryInterface\n    }\n  }\n})\n\nfunction addClassToElementsWithClassText(classText, classToAdd, options = {\n  targetClass: '',\n  excludeClasses: []\n}) {\n  const { targetClass, excludeClasses } = options\n\n  const excludeSelectors = excludeClasses.map(excludeClass => {\n    return `:not([class^=\"${excludeClass}-\"][class$=\"-\"], [class*=\" ${excludeClass} \"]:not([class*=\" ${excludeClass}-\"]), [class$=\"${excludeClass}\"]:not([class*=\"-\"])`\n  })\n\n  const elements = document.querySelectorAll(`[class*=\"${classText}\"]${excludeSelectors.join('')}`)\n  for (const element of elements) {\n    if (targetClass && element.classList.contains(targetClass)) {\n      if (excludeClasses.some(excludeClass => element.classList.contains(excludeClass))) {\n        const newElement = document.createElement('div')\n        newElement.classList.add('ripple-surface')\n        element.append(newElement)\n      } else {\n        element.classList.add(classToAdd)\n      }\n    } else {\n      element.classList.add(classToAdd)\n    }\n  }\n}\n\naddClassToElementsWithClassText('btn', 'mdc-ripple-surface', {\n  targetClass: '',\n  excludeClasses: ['btn-toolbar', 'dropdown-toggle', 'btn-group']\n})\n\n//\n// function addClassToElementsWithClassText(classText, classToAdd, options = {\n//   targetClass: '',\n//   excludeTargetClass: [],\n//   excludeClasses: []\n// }) {\n//   const { targetClass, excludeTargetClass, excludeClasses } = options\n//\n//   const excludeSelectors = excludeClasses.map(excludeClass => {\n//     return `:not([class^=\"${excludeClass}-\"][class$=\"-\"], [class*=\" ${excludeClass} \"]:not([class*=\" ${excludeClass}-\"]), [class$=\"${excludeClass}\"]:not([class*=\"-\"]), .mdc-ripple-surface`\n//   })\n//\n//   const elements = document.querySelectorAll(`[class*=\"${classText}\"]${excludeSelectors.join('')}`)\n//   for (const element of elements) {\n//     if (element.classList.contains('mdc-ripple-surface')) {\n//       continue // skip element with 'mdc-ripple-surface' class\n//     }\n//     if (excludeClasses.some(cls => element.classList.contains(cls))) {\n//       const newElement = document.createElement('div')\n//       newElement.classList.add('ripple-surface')\n//       element.append(newElement)\n//     } else {\n//       element.classList.add(classToAdd)\n//     }\n//   }\n// }\n// function addClassToElementsWithClassText(classText, classToAdd, options = {\n//   targetClass: '',\n//   excludeTargetClass: '',\n//   excludeClasses: []\n// }) {\n//   const { targetClass, excludeTargetClass, excludeClasses } = options\n//\n//   const excludeSelectors = excludeClasses.map(excludeClass => {\n//     return `:not(.${excludeClass})`\n//   })\n//\n//   const elements = document.querySelectorAll(`[class*=\"${classText}\"]${excludeSelectors.join('')}`)\n//   for (const element of elements) {\n//     if (element.classList.contains('mdc-ripple-surface')) {\n//       continue\n//     }\n//     if (targetClass && element.classList.contains(targetClass) && !element.classList.contains(excludeTargetClass)) {\n//       const newElement = document.createElement('div')\n//       newElement.classList.add('ripple-surface')\n//       element.append(newElement)\n//     } else if (!excludeClasses.some(cls => element.classList.contains(cls))) {\n//       element.classList.add(classToAdd)\n//     }\n//   }\n// }\n\n// function addClassToElementsWithClassText(classText, classToAdd, options = {\n//   targetClass: '',\n//   excludeTargetClass: '',\n//   excludeClasses: []\n// }) {\n//   const { targetClass, excludeTargetClass, excludeClasses } = options\n//\n//   const excludeSelectors = excludeClasses.map(excludeClass => {\n//     return `:not(.${excludeClass})`\n//   })\n//\n//\n//   const elements = document.querySelectorAll(`[class*=\"${classText}\"]${excludeSelectors.join('')}`)\n//   for (const element of elements) {\n//     if (excludeClasses.some(cls => element.classList.contains(cls))) {\n//       let newElement = element.querySelector('.ripple-surface')\n//       if (!newElement) {\n//         newElement = document.createElement('div')\n//         newElement.classList.add('ripple-surface')\n//         element.append(newElement)\n//       }\n//     } else {\n//\n//     }\n//   }\n// }\n//\n// addRippleToElementsWithClassText('btn', 'mdc-ripple-surface', {\n//   excludeClasses: ['dropdown-toggle', 'btn-group', 'btn-group-vertical', 'btn-check', 'btn-toolbar']\n// })\n\n// function addRippleToElements(selector, classesToAdd) {\n// addToCreatedElementsClass('[class*=\"btn-\"]', 'ripple-surface position-relative')\n//   const elements = document.querySelectorAll(selector)\n//   for (const element of elements) {\n//     window.addEventListener('load', () => {\n//       element.unbounded = true\n//       for (const className of classesToAdd.split(' ')) {\n//         element.classList.add(className.trim())\n//       }\n//\n//       return new MDCRipple(element)\n//     })\n//   }\n// }\n//\n// addRippleToElements('[class*=\"btn-\"]', 'ripple-surface position-relative')\n\n// const buttonEls = Array.from(mainEl.querySelectorAll('.mdc-button, .mdc-fab'))\n// buttonEls.forEach((el) => mdc.ripple.MDCRipple.attachTo(el))\n// const btnIconElements = document.querySelectorAll('a[class=\"btn-close\"][class=\"btn-icon\"], button[class=\"btn-close\"][class=\"btn-icon\"]')\n// const btnElements = document.querySelectorAll('a[class=\"btn\"], button[class*=\"btn\"]')\n//\n// for (const btnIconElement of btnIconElements) {\n//   window.addEventListener('load', () => {\n//     btnIconElement.unbounded = true\n//     btnIconElement.classList.add('mdc-icon-button')\n//     // btnElement.classList.add('mdc-button')\n//     return new MDCRipple(btnIconElement)\n//   })\n// }\n\nexport default MDCRippled\n"],"names":["NAME","MDCRippled","constructor","element","root","active","addEventListener","evt","isSpace","foundation","MDCRippleFoundation","MDCRipple","createAdapter","isSurfaceActive","ripple","key","keyCode","onDOMContentLoaded","$","getjQuery","JQUERY_NO_CONFLICT","fn","jQueryInterface","Constructor","noConflict","addClassToElementsWithClassText","classText","classToAdd","options","targetClass","excludeClasses","excludeSelectors","map","excludeClass","elements","document","querySelectorAll","join","classList","contains","some","newElement","createElement","add","append"],"mappings":"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"}