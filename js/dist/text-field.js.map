{"version":3,"file":"text-field.js","sources":["../src/text-field.js"],"sourcesContent":["import {getBaseColor, getPrimaryColor} from './util/color.js'\nimport BaseComponent from './base-component.js'\nimport {defineJQueryPlugin} from './util/index.js'\n\n/**\n * Constants\n */\nconst NAME = 'textfield'\nconst CLASS_NAME_FLOATING = 'floating-label'\nconst CLASS_NAME_FLOATING_OUTLINED = 'floating-label-ripple'\nconst LABEL_SCALE = 0.85\n\nclass TextField extends BaseComponent {\n  constructor(element) {\n    super(element)\n    this._textField = element\n    this._formFloating = element.closest(`[class*=\"${CLASS_NAME_FLOATING}\"]`)\n\n    if (this._textField && this._formFloating) {\n      this.initTextFields()\n      this.addFontsReadyEvent()\n    }\n  }\n\n  static get NAME() {\n    return NAME\n  }\n  static jQueryInterface(config) {\n    return this.each(function () {\n      const data = TextField.getOrCreateInstance(this)\n\n      if (typeof config === 'string') {\n        if (typeof data[config] === 'undefined') {\n          throw new TypeError(`No method named \"${config}\"`)\n        }\n\n        data[config](this)\n      }\n    })\n  }\n  initTextFields() {\n    const baseColor = getBaseColor(this._formFloating)\n    const primaryColor = getPrimaryColor(this._formFloating)\n\n    if (baseColor) {\n      this._formFloating.style.setProperty('--bs-floating-label-border-color', baseColor)\n    }\n\n    if (primaryColor) {\n      this._formFloating.style.setProperty('--bs-floating-label-active-border-color', primaryColor)\n    }\n\n    this._label = this._formFloating.querySelector('label')\n    this._inputGroup = this._formFloating.closest('.input-group')\n\n    if (this._inputGroup) {\n      if (this._formFloating.className.includes(CLASS_NAME_FLOATING_OUTLINED)) {\n        this._inputGroup.classList.add('has-floating-label-ripple')\n      } else {\n        this._inputGroup.classList.add('has-floating-label')\n      }\n    }\n\n    this._formFloatingWithIcon = this._formFloating.closest('.floating-label-with-icon')\n\n    if (this._formFloatingWithIcon) {\n      this._prepend = this._formFloatingWithIcon.querySelector('.prepend')\n      this._append = this._formFloatingWithIcon.querySelector('.append')\n    }\n\n    if (this._prepend) {\n      this._label.style.paddingLeft = 0\n    }\n\n    if (this._formFloating.className.includes(CLASS_NAME_FLOATING_OUTLINED)) {\n      this.addRipple()\n    } else {\n      this.addNotch()\n    }\n  }\n\n  redraw() {\n    if (this._label) {\n      this._formFloating.style.setProperty('--floating-label-margin-right', `-${this._label.offsetWidth - (this._label.offsetWidth * LABEL_SCALE)}px`)\n    }\n\n    this.addFontsReadyEvent()\n  }\n\n  addRipple() {\n    const ripple = document.createElement('div')\n    ripple.className = 'm-line-ripple'\n\n    this._ripple = ripple\n    this._textField.after(ripple)\n  }\n\n  addNotch() {\n    const notch = document.createElement('div')\n    notch.className = 'm-notch'\n\n    const notchBefore = document.createElement('div')\n    notchBefore.className = 'm-notch-before'\n\n    const notchBetween = document.createElement('div')\n    notchBetween.className = 'm-notch-between'\n\n    const notchAfter = document.createElement('div')\n    notchAfter.className = 'm-notch-after'\n\n    notch.append(notchBefore)\n    notch.append(notchBetween)\n    notch.append(notchAfter)\n\n    this._textField.after(notch)\n    this._notch = notch\n\n    if (this._label) {\n      notchBetween.append(this._label)\n      this._formFloating.style.setProperty('--floating-label-margin-right', `-${this._label.offsetWidth - (this._label.offsetWidth * LABEL_SCALE)}px`)\n    }\n  }\n\n  addFontsReadyEvent() {\n    document.fonts.ready.then(() => {\n      if (this._formFloatingWithIcon) {\n        if (this._prepend) {\n          this._prepend.style.height = `${this._textField.offsetHeight}px`\n          this._formFloating.style.setProperty('--prepend-width', `${this._prepend.offsetWidth}px`)\n        }\n\n        if (this._append) {\n          this._append.style.height = `${this._textField.offsetHeight}px`\n          this._formFloating.style.setProperty('--append-width', `${this._append.offsetWidth}px`)\n        }\n      }\n    })\n  }\n}\n\ndefineJQueryPlugin(TextField)\nexport default TextField\n\nconst textFieldList = Array.prototype.slice.call(document.querySelectorAll('.form-control, .form-select'))\ntextFieldList.map(textField => {\n  return new TextField(textField)\n})\n"],"names":["NAME","CLASS_NAME_FLOATING","CLASS_NAME_FLOATING_OUTLINED","LABEL_SCALE","TextField","BaseComponent","constructor","element","_textField","_formFloating","closest","initTextFields","addFontsReadyEvent","jQueryInterface","config","each","data","getOrCreateInstance","TypeError","baseColor","getBaseColor","primaryColor","getPrimaryColor","style","setProperty","_label","querySelector","_inputGroup","className","includes","classList","add","_formFloatingWithIcon","_prepend","_append","paddingLeft","addRipple","addNotch","redraw","offsetWidth","ripple","document","createElement","_ripple","after","notch","notchBefore","notchBetween","notchAfter","append","_notch","fonts","ready","then","height","offsetHeight","defineJQueryPlugin","textFieldList","Array","prototype","slice","call","querySelectorAll","map","textField"],"mappings":"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"}